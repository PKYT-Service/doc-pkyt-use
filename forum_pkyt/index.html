<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PKYT - Service ADM Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.0/dist/tailwind.min.css" rel="stylesheet">
     <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .menu-transition {
            transition: width 0.3s, padding 0.3s;
        }
        .menu-text {
            transition: opacity 0.3s ease-in-out;
        }
    </style>
</head>
<body class="flex h-screen m-0 font-sans">

    <!-- Menu -->
    <div id="menu" class="bg-gray-800 text-white w-52 menu-transition flex-shrink-0 relative">
        <button onclick="toggleMenu()" class="bg-gray-700 hover:bg-gray-600 w-full py-4 px-2 text-left">
            PKYT - Service
        </button>
        <div id="menu-text" class="menu-text absolute top-0 left-0 right-0 p-4 text-center opacity-0 transition-opacity duration-300">
            PKYT - Service | Forum 180
        </div>
        <ul id="menu-items" class="list-none p-0 m-0 mt-16">
            <li><a href="#" onclick="loadPage('https://pkyt-database-up.vercel.app/')" class="block py-4 text-center hover:bg-gray-600">Home</a></li>

<hr>
<center>
<b>conditions</b>
</center>
<hr>

<li><a href="#" onclick="loadPage('https://doc-pkyt-use.vercel.app/forum_pkyt/page/cdt_discord-PKYT.html')" class="block py-4 text-center hover:bg-gray-600"> Discord - PikaYutMG </a></li>
<li><a href="#" onclick="loadPage('https://doc-pkyt-use.vercel.app/forum_pkyt/page/cdt_web_pkyt.html')" class="block py-4 text-center hover:bg-gray-600"> PKYT / Affilier </a></li>
            

<hr>
<center>
<b> PKYT - Account </b>
</center>
<hr>

<li><a href="#" onclick="loadPage('https://doc-pkyt-use.vercel.app/forum_pkyt/page/pkyt_v3_config.html')" class="block py-4 text-center hover:bg-gray-600"> V3 Config </a></li>
<li><a href="#" onclick="loadPage('https://pkyt-database-up.vercel.app/pkyt-use.html')" class="block py-4 text-center hover:bg-gray-600"> V2 Config [FIN] </a></li>


   <center><div class="container">
        <div id="content"></div>
        <div id="li_section"></div>
       
    </div></center>
 </ul>

        <hr>
<center>
<h1 id="service-title"> </h1>
</center>
<hr>
<ul id="section-list"></ul>

    </div>

    <!-- Content -->
    <div class="flex-1 bg-gray-100 flex justify-center items-center">
        <iframe id="iframe" src="https://pkyt-database-up.vercel.app/" class="w-full h-full border-none"></iframe>
    </div>

    <script>
// Fonction pour basculer le menu
function toggleMenu() {
    const menu = document.getElementById('menu');
    const menuText = document.getElementById('menu-text');
    const menuItems = document.getElementById('menu-items');

    // Vérifier la largeur actuelle du menu
    if (menu.style.width === '50px' || menu.style.width === '') {
        // Agrandir le menu
        menu.style.width = '200px';
        menuText.style.opacity = '0'; // Masquer le texte
        menuItems.style.display = 'block'; // Afficher les éléments du menu
    } else {
        // Réduire le menu
        menu.style.width = '50px';
        menuText.style.opacity = '1'; // Afficher le texte
        menuItems.style.display = 'none'; // Masquer les éléments du menu
    }
}

// Vérifier si l'URL contient un hash et changer la source de l'iframe
window.addEventListener('load', function() {
    function verifierHashEtChangerIframe(hashAttendu, nouvelleSrc) {
        const hashActuel = window.location.hash;
        console.log("Hash actuel : " + hashActuel);  // Debug

        // Vérifier si le hash actuel correspond à celui attendu
        if (hashActuel === hashAttendu) {
            console.log("Hash correspond à : " + hashAttendu);  // Debug
            let iframe = document.querySelector('iframe');
            if (iframe) {
                console.log("Iframe trouvé, changement de source vers : " + nouvelleSrc);  // Debug
                iframe.src = nouvelleSrc;
            } else {
                console.warn('Aucun élément iframe trouvé sur la page.');
            }
        } else {
            console.log("Le hash ne correspond pas. Attendu : " + hashAttendu);  // Debug
        }
    }

    // Délais de 2 secondes avant d'exécuter la vérification
    setTimeout(function() {
        verifierHashEtChangerIframe('#conditions', 'https://doc-pkyt-use.vercel.app/forum_pkyt/page/cdt_web_pkyt.html');
        verifierHashEtChangerIframe('#discord_pikayutmg', 'https://doc-pkyt-use.vercel.app/forum_pkyt/page/cdt_discord-PKYT.html');
        verifierHashEtChangerIframe('#discord_ebsayder', 'https://doc-pkyt-use.vercel.app/forum_pkyt/page/cdt_discord-EBSDR.html');
    }, 2000); // 2000 millisecondes = 2 secondes
});

// Fonction pour charger une page dans l'iframe
function loadPage(url) {
    const iframe = document.getElementById('iframe');
    if (iframe) {
        iframe.src = url;
    } else {
        console.warn('Aucun élément iframe trouvé pour charger la page.');
    }
}

    </script>



    <script>
        async function loadAccountData() {
            const account = localStorage.getItem('account');
            if (!account) {
                document.getElementById('content').innerHTML = '<p>Aucun compte pour un forum entreprise .</p>';
                return;
            }

            try {
                const response = await fetch(`https://pkyt-database-up.vercel.app/account/v3/${account}.json`);
                const data = await response.json();
                const serviceName = data.service.nomDuService;

                const linkResponse = await fetch('./link.json');
                const linkData = await linkResponse.json();

                // Get the URL(s) for the current service
                const forumContentUrls = linkData[serviceName] || [];
                if (forumContentUrls.length === 0) {
                    document.getElementById('content').innerHTML = '<p> Aucun forum lier au service de votre compte.</p>';
                    return;
                }

                let htmlContent = '';
                for (const forumContentUrl of forumContentUrls) {
                    const contentResponse = await fetch(forumContentUrl);
                    const content = await contentResponse.json();

                    for (const section of content.sections) {
                        htmlContent += `
                            <div class="section">
                                <center>
                                    <hr>
                                    <b>${section.title}</b>
                                    <hr>
                                </center>
                                <ul>
                        `;
                        for (const link of section.links) {
                            htmlContent += `
                                <li>
                                    <a href="#" onclick="loadPage('${link.url}')">${link.name}</a>
                                </li>
                            `;
                        }
                        htmlContent += '</ul></div>';
                    }
                }
                document.getElementById('content').innerHTML = htmlContent;

            } catch (error) {
                document.getElementById('content').innerHTML = '<p>Erreur de chargement.</p>';
                console.error(error);
            }
        }

        function loadPage(url) {
            document.getElementById('iframe').src = url;
        }

        window.onload = loadAccountData;
    </script>






<script src="https://pkyt-database-up.vercel.app/code-source/tout-service-lier-pkyt.js"></script>
</body>
</html>
