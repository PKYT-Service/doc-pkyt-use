<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PKYT - Service ADM Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.0/dist/tailwind.min.css" rel="stylesheet">
     <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .menu-transition {
            transition: width 0.3s, padding 0.3s;
        }
        .menu-text {
            transition: opacity 0.3s ease-in-out;
        }
    </style>
</head>
<body class="flex h-screen m-0 font-sans">

    <!-- Menu -->
    <div id="menu" class="bg-gray-800 text-white w-52 menu-transition flex-shrink-0 relative">
        <button onclick="toggleMenu()" class="bg-gray-700 hover:bg-gray-600 w-full py-4 px-2 text-left">
            PKYT - Service
        </button>
        <div id="menu-text" class="menu-text absolute top-0 left-0 right-0 p-4 text-center opacity-0 transition-opacity duration-300">
            PKYT - Service | Forum 180
        </div>
        <ul id="menu-items" class="list-none p-0 m-0 mt-16">
            <li><a href="#" onclick="loadPage('https://pkyt-database-up.vercel.app/')" class="block py-4 text-center hover:bg-gray-600">Home</a></li>

<hr>
<center>
<b>conditions</b>
</center>
<hr>

<li><a href="#" onclick="loadPage('https://doc-pkyt-use.vercel.app/forum_pkyt/page/cdt_discord-PKYT.html')" class="block py-4 text-center hover:bg-gray-600"> Discord - PikaYutMG </a></li>
<li><a href="#" onclick="loadPage('https://doc-pkyt-use.vercel.app/forum_pkyt/page/cdt_web_pkyt.html')" class="block py-4 text-center hover:bg-gray-600"> PKYT / Affilier </a></li>
            

<hr>
<center>
<b> PKYT - Account </b>
</center>
<hr>

<li><a href="#" onclick="loadPage('https://doc-pkyt-use.vercel.app/forum_pkyt/page/pkyt_v3_config.html')" class="block py-4 text-center hover:bg-gray-600"> V3 Config </a></li>
<li><a href="#" onclick="loadPage('https://pkyt-database-up.vercel.app/pkyt-use.html')" class="block py-4 text-center hover:bg-gray-600"> V2 Config [FIN] </a></li>



 </ul>

        <hr>
<center>
<h1 id="service-title"> </h1>
</center>
<hr>
<ul id="section-list"></ul>

    </div>

    <!-- Content -->
    <div class="flex-1 bg-gray-100 flex justify-center items-center">
        <iframe id="iframe" src="https://pkyt-database-up.vercel.app/" class="w-full h-full border-none"></iframe>
    </div>

    <script>
        function toggleMenu() {
            const menu = document.getElementById('menu');
            const menuText = document.getElementById('menu-text');
            const menuItems = document.getElementById('menu-items');
            
            // Check the current width of the menu
            if (menu.style.width === '50px' || menu.style.width === '') {
                // Expand the menu
                menu.style.width = '200px';
                menuText.style.opacity = '0'; // Hide the text
                menuItems.style.display = 'block'; // Show menu items
            } else {
                // Collapse the menu
                menu.style.width = '50px';
                menuText.style.opacity = '1'; // Show the text
                menuItems.style.display = 'none'; // Hide menu items
            }
        }

       

// Vérifier si l'URL contient #conditions

        window.addEventListener('load', function() {
    // Fonction pour vérifier la règle et changer la source de l'iframe
    function verifierHashEtChangerIframe(hashAttendu, nouvelleSrc) {
        const hashActuel = window.location.hash;
        console.log("Hash actuel : " + hashActuel);  // Debug

        // Vérifier si le hash actuel correspond à celui attendu
        if (hashActuel === hashAttendu) {
            console.log("Hash correspond à : " + hashAttendu);  // Debug
            let iframe = document.querySelector('iframe');
            if (iframe) {
                console.log("Iframe trouvé, changement de source vers : " + nouvelleSrc);  // Debug
                iframe.src = nouvelleSrc;
            } else {
                console.warn('Aucun élément iframe trouvé sur la page.');
            }
        } else {
            console.log("Le hash ne correspond pas. Attendu : " + hashAttendu);  // Debug
        }
    }




                    function loadPage(url) {
            const iframe = document.getElementById('iframe');
            iframe.src = url;
        }






            

    // Délais de 2 secondes avant d'exécuter la vérification
    setTimeout(function() {
        verifierHashEtChangerIframe('#conditions', 'https://doc-pkyt-use.vercel.app/forum_pkyt/page/cdt_web_pkyt.html');
        verifierHashEtChangerIframe('#discord_pikayutmg', 'https://doc-pkyt-use.vercel.app/forum_pkyt/page/cdt_discord-PKYT.html');
        verifierHashEtChangerIframe('#discord_ebsayder', 'https://doc-pkyt-use.vercel.app/forum_pkyt/page/cdt_discord-EBSDR.html');
    }, 2000); // 2000 millisecondes = 2 secondes
});

        

    </script>











     <script>
    // Vérifier si l'account existe dans le localStorage
    const account = localStorage.getItem('account');

    if (account) {
        // Récupérer les données du compte depuis l'API
        const accountURL = `https://pkyt-database-up.vercel.app/account/v3/${account}.json`;
        
        fetch(accountURL)
            .then(response => response.json())
            .then(data => {
                const serviceName = data.service.nomDuService;
                console.log("Nom du service : " + serviceName);

                // Récupérer le fichier forum.json et chercher le service correspondant
                fetch('https://doc-pkyt-use.vercel.app/forum_pkyt/forum.json')
                    .then(response => response.json())
                    .then(forumData => {
                        const serviceLinks = forumData[serviceName];
                        
                        // Si le service correspond, afficher les liens
                        if (serviceLinks) {
                            document.getElementById('service-title').innerText = serviceName;

                            const sectionList = document.getElementById('section-list');

                            // Si des sections sont disponibles, les afficher
                            Object.keys(serviceLinks).forEach(section => {
                                const sectionData = serviceLinks[section];

                                // Vérifier s'il y a une section
                                if (sectionData.section) {
                                    sectionList.innerHTML += `
                                        <hr>
                                        <center><b>${sectionData.section}</b></center>
                                        <hr>
                                    `;
                                }

                                // Vérifier s'il y a des liens
                                if (sectionData.link) {
                                    sectionData.link.forEach(link => {
                                        sectionList.innerHTML += `
                                            <li>
                                                <a onclick="loadPage('${link.url}')" class="block">
                                                    ${link.name}
                                                </a>
                                            </li>
                                        `;
                                    });
                                }
                            });
                        } else {
                            console.log("Aucun lien trouvé pour le service.");
                        }
                    })
                    .catch(error => console.error('Erreur lors de la récupération du forum.json :', error));
            })
            .catch(error => console.error('Erreur lors de la récupération du compte :', error));
    } else {
        console.log("Aucun compte trouvé dans le localStorage.");
    }

    // Fonction pour charger une nouvelle page dans l'iframe (ou rediriger)
    function loadPage(url) {
        window.location.href = url;  // Pour rediriger vers une nouvelle page
    }
</script>
<script src="https://pkyt-database-up.vercel.app/code-source/tout-service-lier-pkyt.js"></script>
</body>
</html>
